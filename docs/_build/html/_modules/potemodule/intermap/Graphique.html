<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>potemodule.intermap.Graphique &mdash; Documentation potemodule 1.0.0</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> potemodule
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation, contacts et sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/install.html">Comment installer le package potemodule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/contacts.html">Contacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/sources.html">Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Prédiction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Prediction/potemodule.Prediction.html">Module potemodule.Prediction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Visualisation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Visualisation/potemodule.intermap.html">Module potmodule.intermap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">potemodule</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Code du module</a></li>
      <li class="breadcrumb-item active">potemodule.intermap.Graphique</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Code source de potemodule.intermap.Graphique</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">mpld3</span>                             <span class="c1"># Pour transformer les graphiques en html</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">import</span> <span class="nn">folium</span>


<div class="viewcode-block" id="graphique"><a class="viewcode-back" href="../../../Visualisation/potemodule.intermap.Graphique.html#potemodule.intermap.Graphique.graphique">[docs]</a><span class="k">class</span> <span class="nc">graphique</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Graphique de la consommation sur 4 ans à partir d&#39;un dictionaire extraite de la base de données.</span>

<span class="sd">    :param k: kème ville de la liste.</span>

<span class="sd">    :type k: Integer</span>

<span class="sd">    :param d: Data contenant les données de consommation.</span>

<span class="sd">    :type d: Dictionnaire</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>

<div class="viewcode-block" id="graphique.plotage"><a class="viewcode-back" href="../../../Visualisation/potemodule.intermap.Graphique.html#potemodule.intermap.Graphique.graphique.plotage">[docs]</a>    <span class="k">def</span> <span class="nf">plotage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="n">valeurs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># On récupère les valeurs de consommation. Les années étant toujours les mêmes et les villes dans le même ordre, on ne les récupère pas.</span>
            <span class="n">valeurs</span> <span class="o">=</span> <span class="n">valeurs</span> <span class="o">+</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
        <span class="c1"># Par simplicité, les villes sans données pour 2018 ont quand même été conservées dans la liste des villes, mais avec une valeur de 0. On vérifie donc si la valeur est nulle ou non pour éviter de tracer un graphique avec une valeur de 0.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">2021</span><span class="p">],</span>  <span class="p">[</span><span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span>
                         <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]],</span> <span class="s1">&#39;ks-&#39;</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">2019</span><span class="p">,</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">2021</span><span class="p">],</span>  <span class="p">[</span><span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span>
                         <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="n">valeurs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]],</span> <span class="s1">&#39;ks-&#39;</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">fig</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Marker"><a class="viewcode-back" href="../../../Visualisation/potemodule.intermap.Graphique.html#potemodule.intermap.Graphique.Marker">[docs]</a><span class="k">def</span> <span class="nf">Marker</span><span class="p">(</span><span class="n">Carte</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Création d&#39;un marqueur incluant le graphique sur la carte pour la ville k.</span>

<span class="sd">    :param Carte: Carte.</span>

<span class="sd">    :type Carte: folium.map</span>

<span class="sd">    :param k: kème ville de la liste.</span>

<span class="sd">    :type k: Integer</span>

<span class="sd">    :param d: Data contenant les données de consommation.</span>

<span class="sd">    :type d: Dictionnaire</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Coord</span> <span class="o">=</span> <span class="p">[</span><span class="mf">43.53</span><span class="p">,</span> <span class="mf">5.45</span><span class="p">,</span> <span class="mf">47.47</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.56</span><span class="p">,</span> <span class="mf">44.83</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.34</span><span class="p">,</span> <span class="mf">48.23</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.49</span><span class="p">,</span> <span class="mf">45.78</span><span class="p">,</span> <span class="mf">3.08</span><span class="p">,</span> <span class="mf">47.32</span><span class="p">,</span> <span class="mf">5.04</span><span class="p">,</span> <span class="mf">49.49</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">50.64</span><span class="p">,</span> <span class="mf">3.06</span><span class="p">,</span> <span class="mf">45.76</span><span class="p">,</span> <span class="mf">4.83</span><span class="p">,</span> <span class="mf">43.3</span><span class="p">,</span> <span class="mf">5.37</span><span class="p">,</span>
             <span class="mf">43.61</span><span class="p">,</span> <span class="mf">3.88</span><span class="p">,</span> <span class="mf">47.22</span><span class="p">,</span> <span class="mf">1.55</span><span class="p">,</span> <span class="mf">43.7</span><span class="p">,</span> <span class="mf">7.27</span><span class="p">,</span> <span class="mf">43.83</span><span class="p">,</span> <span class="mf">4.36</span><span class="p">,</span> <span class="mf">48.86</span><span class="p">,</span> <span class="mf">2.35</span><span class="p">,</span> <span class="mf">49.27</span><span class="p">,</span> <span class="mf">4.03</span><span class="p">,</span> <span class="mf">48.11</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.68</span><span class="p">,</span> <span class="o">-</span><span class="mf">20.87</span><span class="p">,</span> <span class="mf">55.44</span><span class="p">,</span> <span class="mf">45.43</span><span class="p">,</span> <span class="mf">4.39</span><span class="p">,</span> <span class="mf">43.12</span><span class="p">,</span> <span class="mf">5.93</span><span class="p">,</span> <span class="mf">43.6</span><span class="p">,</span> <span class="mf">1.44</span><span class="p">,</span> <span class="mf">45.77</span><span class="p">,</span> <span class="mf">4.88</span><span class="p">]</span>
    <span class="c1"># Coord est une liste contenant les coordonnées des villes dans l&#39;ordre de la liste A.</span>

    <span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Aix-en-Provence&quot;</span><span class="p">,</span> <span class="s2">&quot;Angers&quot;</span><span class="p">,</span> <span class="s2">&quot;Bordeaux&quot;</span><span class="p">,</span>    <span class="s2">&quot;Brest&quot;</span><span class="p">,</span> <span class="s2">&quot;Clermont-Ferrand&quot;</span><span class="p">,</span> <span class="s2">&quot;Dijon&quot;</span><span class="p">,</span> <span class="s2">&quot;Le Havre&quot;</span><span class="p">,</span> <span class="s2">&quot;Le Mans&quot;</span><span class="p">,</span> <span class="s2">&quot;Lille&quot;</span><span class="p">,</span> <span class="s2">&quot;Lyon&quot;</span><span class="p">,</span> <span class="s2">&quot;Marseille&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Montpellier&quot;</span><span class="p">,</span> <span class="s2">&quot;Nantes&quot;</span><span class="p">,</span>   <span class="s2">&quot;Nice&quot;</span><span class="p">,</span>    <span class="s2">&quot;Nîmes&quot;</span><span class="p">,</span>     <span class="s2">&quot;Paris&quot;</span><span class="p">,</span>    <span class="s2">&quot;Reims&quot;</span><span class="p">,</span>   <span class="s2">&quot;Rennes&quot;</span><span class="p">,</span>  <span class="s2">&quot;Saint-Denis&quot;</span><span class="p">,</span> <span class="s2">&quot;Saint-Étienne&quot;</span><span class="p">,</span> <span class="s2">&quot;Toulon&quot;</span><span class="p">,</span> <span class="s2">&quot;Toulouse&quot;</span><span class="p">,</span> <span class="s2">&quot;Villeurbanne&quot;</span><span class="p">]</span>

    <span class="n">b</span> <span class="o">=</span> <span class="n">graphique</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>  <span class="c1"># On crée un objet graphique pour la ville k.</span>
    <span class="c1"># On plot et transforme le graphique en html.</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">mpld3</span><span class="o">.</span><span class="n">fig_to_html</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">plotage</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>

    <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;/style&gt;&lt;h1&gt;&#39;&#39;&#39;</span><span class="o">+</span><span class="s1">&#39;&#39;&#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#39;&#39;&#39;</span> <span class="o">+</span> \
        <span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;&#39;&#39;&lt;/h1&gt;&#39;&#39;&#39;</span>  <span class="c1"># On ajoute le nom de la ville au graphique en html.</span>

    <span class="n">elements</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&lt;/style&gt;&quot;</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
        <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">Coord</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="p">],</span> <span class="n">Coord</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]],</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Popup</span><span class="p">(</span>
            <span class="n">folium</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span>
                <span class="n">html</span><span class="o">=</span><span class="n">f</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="mi">550</span><span class="p">),</span>
            <span class="n">max_width</span><span class="o">=</span><span class="mi">700</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">Carte</span><span class="p">)</span>  <span class="c1"># On ajoute le marqueur à la carte.</span>

    <span class="c1"># On ferme le graphique pour éviter de surcharger la mémoire.</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">Carte</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Crespin Paul, Lamrini Oualid, Renoir Thamara, Sinibaldi Emma.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>